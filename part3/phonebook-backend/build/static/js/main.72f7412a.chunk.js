(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(19),o=t.n(a),u=t(4),s=t(5),i=t(0),d=function(e){var n=e.value,t=e.onChange;return Object(i.jsxs)("div",{children:["filter shown with",Object(i.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.success,t=void 0===n||n,r=e.message,c={color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},a=Object(u.a)(Object(u.a)({},c),{},{color:"red"});return Object(i.jsx)(i.Fragment,{children:r&&Object(i.jsx)("div",{style:t?c:a,children:r})})},l=function(e){var n=e.name,t=e.number,r=e.onSubmit,c=e.onNameChange,a=e.onNumberChange;return Object(i.jsxs)("form",{onSubmit:r,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:c})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:t,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.person,t=e.handleDelete;return Object(i.jsxs)("div",{children:[n.name," ",n.number,Object(i.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]},n.id)},f=function(e){var n=e.persons,t=e.handleDelete;return Object(i.jsx)(i.Fragment,{children:n.map((function(e){return Object(i.jsx)(j,{person:e,handleDelete:t},e.id)}))})},h=t(3),p=t.n(h),m=t(6),O=t(7),v=t.n(O),x="/api/persons",g=function(){var e=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(x);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(x,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat(x,"/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(p.a.mark((function e(n,t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(x,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),S={getAll:g,create:w,deletePerson:C,update:k},y=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(s.a)(a,2),j=o[0],h=o[1],p=Object(r.useState)(""),m=Object(s.a)(p,2),O=m[0],v=m[1],x=Object(r.useState)(""),g=Object(s.a)(x,2),w=g[0],C=g[1],k=Object(r.useState)({success:!0,message:""}),y=Object(s.a)(k,2),D=y[0],N=y[1];Object(r.useEffect)((function(){S.getAll().then((function(e){c(e)})).catch(console.error)}),[]);var P=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;N({success:e,message:n}),setTimeout((function(){return N(Object(u.a)(Object(u.a)({},D),{},{message:""}))}),t)},A=w?t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})):t;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(b,{success:D.success,message:D.message}),Object(i.jsx)(d,{value:w,onChange:function(e){C(e.target.value)}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(l,{name:j,number:O,onNameChange:function(e){h(e.target.value)},onNumberChange:function(e){v(e.target.value)},onSubmit:function(e){if(e.preventDefault(),j&&O){var n=t.find((function(e){return e.name===j}));if(n){if(window.confirm("".concat(j," is already added to the phonebook, replace the old number with a new one?"))){var r=Object(u.a)(Object(u.a)({},n),{},{number:O});S.update(n.id,r).then((function(e){c(t.map((function(n){return n.id===e.id?e:n}))),P(!0,"Changed number for ".concat(e.name)),h(""),v("")})).catch((function(e){return P(!1,"".concat(n.name," is not found"))}))}}else S.create({name:j,number:O}).then((function(e){c(t.concat(e)),P(!0,"Added ".concat(e.name)),h(""),v("")})).catch(console.error)}else alert("Please fill out name and number.")}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(f,{persons:A,handleDelete:function(e){var n=e.name,r=e.id;window.confirm("Delete ".concat(n,"?"))&&S.deletePerson(r).then((function(){c(t.filter((function(e){return e.id!==r}))),P(!0,"Deleted ".concat(n))})).catch((function(e){return P(!1,"".concat(n," is not found"))}))}})]})};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.72f7412a.chunk.js.map